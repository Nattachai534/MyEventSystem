<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏á‡∏≤‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&display=swap');
        body { font-family: 'Sarabun', sans-serif; }
        .bg-overlay {
            background-image: url('https://images.unsplash.com/photo-1513151233558-d860c5398176?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
        }
        .btn-pink { background-color: #f472b6; color: white; }
        .btn-pink:hover { background-color: #ec4899; }
        
        /* Animation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ß‡∏¥‡πà‡∏á */
        .slot-machine { animation: bounce 0.5s infinite; }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="bg-overlay min-h-screen flex flex-col items-center justify-center p-4 relative">
    
    <div class="absolute inset-0 bg-white/40 backdrop-blur-sm z-0"></div>

    <div class="relative z-10 bg-white/95 p-6 rounded-2xl shadow-2xl w-full max-w-md text-center border-4 border-pink-200 overflow-y-auto max-h-screen">
        
        <div class="mb-4">
            <img src="https://img5.pic.in.th/file/secure-sv1/Logo7aa6b85707286291.png" alt="Logo" class="h-20 mx-auto mb-2 drop-shadow-md">
            <h1 class="text-xl font-bold text-pink-600">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô</h1>
            <h2 class="text-sm font-semibold text-pink-500">‡∏™‡πà‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏õ‡∏µ‡πÄ‡∏Å‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà 2569</h2>
            <h4 class="text-xs font-bold text-gray-700">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•<br>‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏£‡∏≤‡∏ä‡∏ß‡∏¥‡∏ñ‡∏µ</h4>
        </div>

        <hr class="border-pink-200 mb-4">

        <div id="registerForm">
            <input type="text" id="fname" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á" class="w-full p-3 mb-3 border-2 border-pink-100 rounded-xl">
            <input type="text" id="lname" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" class="w-full p-3 mb-3 border-2 border-pink-100 rounded-xl">
            <input type="text" id="org" placeholder="‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô" class="w-full p-3 mb-6 border-2 border-pink-100 rounded-xl">
            <button onclick="registerUser()" class="w-full btn-pink py-3 rounded-xl font-bold shadow-lg">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
        </div>

        <div id="qrArea" class="hidden pb-10">
            <div class="flex flex-col items-center mb-6">
                <p class="text-green-600 font-bold mb-2">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</p>
                <div id="qrcode" class="p-2 bg-white border-2 border-pink-200 rounded-lg shadow-sm"></div>
                <p class="text-gray-500 text-xs mt-1">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ô‡∏µ‡πâ‡πÑ‡∏ß‡πâ</p>
            </div>

            <div class="w-full grid grid-cols-3 gap-2 mb-6">
                <div class="bg-pink-50 p-2 rounded-lg border border-pink-200">
                    <div class="text-xs text-gray-500">‡∏≠‡∏≤‡∏´‡∏≤‡∏£</div>
                    <div id="qFood" class="text-xl font-bold text-pink-600">-</div>
                </div>
                <div class="bg-yellow-50 p-2 rounded-lg border border-yellow-200">
                    <div class="text-xs text-gray-500">‡∏Ç‡∏ô‡∏°</div>
                    <div id="qSnack" class="text-xl font-bold text-yellow-600">-</div>
                </div>
                <div class="bg-blue-50 p-2 rounded-lg border border-blue-200">
                    <div class="text-xs text-gray-500">‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°</div>
                    <div id="qDrink" class="text-xl font-bold text-blue-600">-</div>
                </div>
            </div>

            <hr class="border-pink-200 mb-6">

            <div class="bg-gradient-to-r from-purple-100 to-pink-100 p-4 rounded-xl border-2 border-purple-200 relative overflow-hidden">
                <div class="absolute -top-4 -right-4 text-purple-200 opacity-50"><i class="fas fa-gift text-9xl"></i></div>
                
                <h3 class="text-lg font-bold text-purple-700 relative z-10"><i class="fas fa-star text-yellow-400"></i> ‡∏•‡∏∏‡πâ‡∏ô‡∏à‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç</h3>
                <p class="text-xs text-purple-600 mb-4 relative z-10">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç</p>
                
                <div id="giftResultArea" class="space-y-2 relative z-10">
                    </div>

                <button id="btnDrawGift" onclick="drawGift()" class="w-full mt-4 bg-purple-500 hover:bg-purple-600 text-white py-3 rounded-xl font-bold shadow-lg transition transform active:scale-95 relative z-10">
                    <i class="fas fa-dice"></i> ‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏¢!
                </button>
            </div>

        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, doc, onSnapshot, runTransaction, arrayUnion, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        // --- ‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö ---
        const MAX_GIFT_QUOTA = 1; // ‚ö†Ô∏è ‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏à‡∏±‡∏ö‡πÑ‡∏î‡πâ 2 ‡∏ä‡∏¥‡πâ‡∏ô
        const RANDOM_RANGE = 500; // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç 1 - 500
        // -------------------

        const firebaseConfig = {
            apiKey: "AIzaSyCk02NdpvJx8xQSb0W2rJjWbsqgTx49-Ak", // ‡πÉ‡∏™‡πà Config ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            authDomain: "myeventsystem-227c5.firebaseapp.com",
            projectId: "myeventsystem-227c5",
            storageBucket: "myeventsystem-227c5.firebasestorage.app"",
            messagingSenderId: "16530953106",
            appId: "1:16530953106:web:8c138d0e74b690b64e674b"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        let currentUserDocId = null;

        // ‡πÄ‡∏ä‡πá‡∏Ñ LocalStorage
        const savedId = localStorage.getItem("rajavithi_event_uid");
        if (savedId) {
            currentUserDocId = savedId;
            showQR(savedId);
        }

        window.registerUser = async function() {
            const fname = document.getElementById('fname').value;
            const lname = document.getElementById('lname').value;
            const org = document.getElementById('org').value;

            if (!fname || !lname) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");

            try {
                const docRef = await addDoc(collection(db, "users"), {
                    firstname: fname,
                    lastname: lname,
                    organization: org,
                    quota: { food: 3, snack: 2, drink: 1 },
                    giftNumbers: [], // ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡πÑ‡∏î‡πâ
                    timestamp: new Date()
                });

                localStorage.setItem("rajavithi_event_uid", docRef.id);
                currentUserDocId = docRef.id;
                showQR(docRef.id);
            } catch (e) {
                console.error(e);
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î");
            }
        }

        function showQR(id) {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('qrArea').classList.remove('hidden');

            document.getElementById("qrcode").innerHTML = "";
            new QRCode(document.getElementById("qrcode"), {
                text: id, width: 150, height: 150, colorDark : "#d53f8c", colorLight : "#ffffff", correctLevel : QRCode.CorrectLevel.H
            });

            // Realtime Update ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• User
            onSnapshot(doc(db, "users", id), (docSnap) => {
                if(docSnap.exists()) {
                    const data = docSnap.data();
                    
                    // Update Quota
                    document.getElementById("qFood").innerText = data.quota.food;
                    document.getElementById("qSnack").innerText = data.quota.snack;
                    document.getElementById("qDrink").innerText = data.quota.drink;

                    // Update Gift UI
                    renderGiftUI(data.giftNumbers || []);
                }
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç
        function renderGiftUI(giftNumbers) {
            const resultArea = document.getElementById('giftResultArea');
            const btn = document.getElementById('btnDrawGift');
            
            resultArea.innerHTML = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤

            // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß
            giftNumbers.forEach((num, index) => {
                resultArea.innerHTML += `
                    <div class="bg-white p-3 rounded-lg border-2 border-purple-300 flex justify-between items-center shadow-sm">
                        <span class="text-purple-800 font-bold">‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà ${index + 1}</span>
                        <span class="text-2xl font-black text-purple-600 bg-purple-100 px-3 rounded-full">#${num}</span>
                    </div>
                `;
            });

            // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏ö‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤
            if (giftNumbers.length >= MAX_GIFT_QUOTA) {
                btn.classList.add('hidden');
                resultArea.innerHTML += `<p class="text-center text-green-600 font-bold mt-2">üéâ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß</p>`;
            } else {
                btn.classList.remove('hidden');
                btn.innerHTML = `<i class="fas fa-dice"></i> ‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà ${giftNumbers.length + 1}`;
            }
        }

        // üî• ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà: ‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Read ‡πÑ‡∏õ‡πÑ‡∏ß‡πâ‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
        window.drawGift = async function() {
            if(!currentUserDocId) return;
            const btn = document.getElementById('btnDrawGift');
            
            // Animation ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°
            btn.disabled = true;
            btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏¢...`;

            try {
                await runTransaction(db, async (transaction) => {
                    // ---------------------------------------------------------
                    // 1. ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (READS) - ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏à‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô
                    // ---------------------------------------------------------
                    const globalRef = doc(db, "system", "gift_tracker");
                    const userRef = doc(db, "users", currentUserDocId);

                    // ‡∏≠‡πà‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ Write ‡∏Ñ‡∏±‡πà‡∏ô
                    const globalDoc = await transaction.get(globalRef);
                    const userDoc = await transaction.get(userRef);

                    if (!userDoc.exists()) throw "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ";

                    // ---------------------------------------------------------
                    // 2. ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• (LOGIC) - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏•‡∏á DB)
                    // ---------------------------------------------------------
                    
                    // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
                    let usedNumbers = [];
                    if (globalDoc.exists()) {
                        usedNumbers = globalDoc.data().used_numbers || [];
                    }

                    // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÇ‡∏Ñ‡∏ß‡∏ï‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                    const currentGifts = userDoc.data().giftNumbers || [];
                    if (currentGifts.length >= MAX_GIFT_QUOTA) throw "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ñ‡∏£‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏•‡πâ‡∏ß";

                    // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç
                    let randomNum;
                    let found = false;
                    let attempts = 0;
                    
                    while (!found && attempts < 200) { // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏Å‡∏±‡∏ô‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß
                        randomNum = Math.floor(Math.random() * RANDOM_RANGE) + 1;
                        if (!usedNumbers.includes(randomNum)) {
                            found = true;
                        }
                        attempts++;
                    }

                    if (!found) throw "‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡πÄ‡∏•‡∏Ç‡∏ß‡πà‡∏≤‡∏á";

                    // ---------------------------------------------------------
                    // 3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (WRITES) - ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡∏≠‡∏ô‡∏à‡∏ö
                    // ---------------------------------------------------------
                    
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Global Tracker
                    if (!globalDoc.exists()) {
                        // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà (Set)
                        transaction.set(globalRef, { used_numbers: [randomNum] });
                    } else {
                        // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (Update)
                        // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ spread operator [...usedNumbers, randomNum] ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÉ‡∏ô transaction
                        transaction.update(globalRef, { used_numbers: [...usedNumbers, randomNum] });
                    }

                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï User
                    transaction.update(userRef, { giftNumbers: arrayUnion(randomNum) });
                });

                // ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
                // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ onSnapshot ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏≠‡∏á

            } catch (e) {
                console.error(e);
                alert("‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: " + e); // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤ throw ‡πÑ‡∏ß‡πâ
            } finally {
                // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏° (‡∏Å‡∏£‡∏ì‡∏µ Error ‡∏´‡∏£‡∏∑‡∏≠ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡πá‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå)
                // ‡πÅ‡∏ï‡πà UI ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ renderGiftUI ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏ú‡πà‡∏≤‡∏ô onSnapshot
                // ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏Ñ‡πà‡∏Å‡∏±‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á
                btn.disabled = false;
                btn.innerHTML = `<i class="fas fa-dice"></i> ‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏¢!`;
            }
        }
    </script>
</body>
</html>
